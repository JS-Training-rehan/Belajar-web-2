<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TEST KALKULATOR</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Monomaniac+One&add=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <h1>TEST KALKULATOR</h1>
    <div class="calculator">
      <div class="led">
        <output
          class="output"
          id="output"
          name="output"
          placeholder="0"
        ></output>
      </div>
      <div class="tempbutton">
        <div>
          <button class="button" id="clear" onclick="add('')">C</button>
          <button class="button" id="add" onclick="add('7')">7</button>
          <button class="button" id="add" onclick="add('4')">4</button>
          <button class="button" id="add" onclick="add('1')">1</button>
          <button class="button" id="add" onclick="add('0')">0</button>
        </div>
        <div>
          <button class="button" id="add" onclick="percent('%')">%</button>
          <button class="button" id="add" onclick="add('8')">8</button>
          <button class="button" id="add" onclick="add('5')">5</button>
          <button class="button" id="add" onclick="add('2')">2</button>
          <button class="button" id="add" onclick="add('00')">00</button>
        </div>
        <div>
          <button class="button" id="add" onclick="operator('/')">/</button>
          <button class="button" id="add" onclick="add('9')">9</button>
          <button class="button" id="add" onclick="add('6')">6</button>
          <button class="button" id="add" onclick="add('3')">3</button>
          <button class="button" id="add" onclick="add('.')">.</button>
        </div>
        <div>
          <button class="button" id="add" onclick="operator('*')">*</button>
          <button class="button" id="add" onclick="operator('-')">-</button>
          <button class="button" id="add" onclick="operator('+')">+</button>
          <button class="buttonE" id="calculate" onclick="calcul()">=</button>
        </div>
      </div>
    </div>
    <script>
      const value = document.getElementById("output");

      let rule = "";

      document.getElementById("clear").addEventListener("click", clear);
      document.getElementById("add").addEventListener("click", value);
      document.getElementById("operator").addEventListener("click", value);
      document.getElementById("calculate").addEventListener("click", value);

      function clear() {
        document.getElementById("output").textContent = "";
        document.getElementById("output").style.color = "white";
        rule = "";
      }
      function add(value) {
        document.getElementById("output").textContent += value;
        if (output.textContent.length > 17) {
          document.getElementById("output").style.color = "red";
          output.textContent = "ERROR, terlalu panjang";
        }
        rule += value;
      }
      function operator(operator) {
        document.getElementById("output").textContent = "";
        if (value.length < 1) {
          document.getElementById("output").textContent = "error";
        } else {
          rule += operator;
        }
      }
      function calcul() {
        const calculate = eval(rule);
        const result = parseFloat(calculate.toFixed(4));
        if (result !== undefined) {
          output.textContent = result;
        }
        if (output.textContent.length > 17) {
          document.getElementById("output").style.color = "red";
          output.textContent = "ERROR, terlalu panjang";
        }
      }
      function percent() {
        const nilaiAwal = parseFloat(rule);
        const nilaiSekarang = nilaiAwal / 100;
        output.textContent = nilaiSekarang;
        rule = nilaiSekarang.toString();
      }
    </script>
    <!-- <script src="index.js"></script> -->

    <!-- <script>
      let firstNumber = "";
      let operasi = "";
      let secondNumber = "";
      const result = document.getElementById("output");

      function add(value) {
        if (value === "clear") {
          result.value = "";
          firstNumber = "";
          operasi = "";
          secondNumber = "";
        } else {
          result.value += value;

          if (!operator) {
            firstNumber += value;
          } else {
            secondNumber += value;
          }
        }
      }

      function operator(value) {
        operasi = value;
        firstNumber = result.value;
        result.value = "";
      }

      function calculate() {
        secondNumber = result.value;

        firstNumber = "";
        operator = "";
        secondNumber = "";
      } -->
    <!-- // const add = (a) => {
      //   if (a == "clear") {
      //     result.value = "";
      //   } else if (a == "calculate") {
      //     var calculate = eval(result.value);
      //     result.value = parseFloat(calculate.toFixed(2));
      //   } else {
      //     result.value += a;
      //   }
      // };
    </script> -->
  </body>
</html>
